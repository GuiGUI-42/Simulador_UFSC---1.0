<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Sinais e Sistemas - Polin√¥mio Caracter√≠stico</title>
    <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.min.js"></script>
    <link rel="stylesheet" href="/static/css/slider-style.css">
    <style>
        /* Cont√™iner principal para layout horizontal */
        .main-container {
            display: flex;
            flex-direction: row; /* Alinhamento horizontal */
            gap: 20px; /* Espa√ßamento entre os cont√™ineres */
            width: 100%;
            align-items: flex-start; /* <-- Adicionado para evitar esticar a altura */
        }

        /* Coluna de par√¢metros fixa e rol√°vel */
        .side-col {
            /* Remova height, max-height, overflow-y */
            padding: 20px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 56px;
            z-index: 10;
            min-width: 320px;
            flex: none;
            /* Removido: height, max-height, overflow-y */
        }

        /* Cont√™iner de gr√°ficos */
        .main-col {
            flex: 1; /* Mant√©m o espa√ßo da coluna da direita */
            max-width: 45%; /* Limita a largura para evitar que os gr√°ficos saiam */
            padding: 10px;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        #plot-container {
            display: flex;
            flex-direction: column; /* Alinhamento vertical */
            gap: 10px; /* Espa√ßamento entre os gr√°ficos */
        }

        /* Centralizar o corpo da p√°gina com margem no topo */
        body {
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Alinhar ao topo */
            min-height: 100vh;
            zoom: 0.9;
            margin: 0;
            padding-top: 20px; /* Margem no topo */
        }

        /* Ajustar o cont√™iner principal para centraliza√ß√£o */
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            max-width: 1200px; /* Limitar a largura m√°xima */
        }

        /* Estilos do menu hamburguer */
        .menu {
            position: fixed;
            top: 8px;
            left: 8px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .menu-icon {
            width: 30px;
            height: 3px;
            background-color: #333;
            margin: 4px 0;
            transition: background-color 0.3s;
        }

        .menu-content {
            display: none;
            flex-direction: column;
            align-items: flex-start;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            padding: 10px;
            margin-top: 8px;
            z-index: 1001;
            min-width: 260px;
            max-width: 280px; /* Limita a largura m√°xima do menu */
            padding: 18px;
        }

        .menu-content.open {
            display: flex;
        }

        .menu-link {
            text-decoration: none;
            color: #333;
            padding: 8px 12px;
            border-radius: 4px;
            transition: background-color 0.3s, color 0.3s;
            width: 100%;
            text-align: left;
            max-width: 240px; /* Limita a largura dos links */
            margin: 10px 0 0 0;
            font-size: 1em;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .menu-link:hover {
            background-color: #1976d2;
            color: #fff;
        }

        #dark-mode-toggle {
            margin-right: 8px;
        }

        /* Estilos para o modo escuro */
        body.dark-mode .side-col {
            background-color: #1e1e1e;
            border-color: #333;
        }
        body.dark-mode .main-col {
            background-color: #2c2c2c;
            border-color: #444;
        }
        body.dark-mode .menu-content {
            background-color: #2c2c2c;
            border-color: #444;
        }

        /* Estilos para o modo claro (padr√£o) */
        .side-col {
            background-color: #f9f9f9;
            border-color: #ddd;
        }
        .main-col {
            background-color: #fff;
            border-color: #ddd;
        }
        .menu-content {
            background-color: #fff;
            border-color: #ddd;
        }

        .input-inline {
            width: 55px;
            min-width: 0;
            font-size: 1em;
            padding: 2px 4px;
            margin: 0 2px;
            border: 2px solid #f9f9f9 !important; /* Borda igual ao slider */
            background: #f9f9fb;
            border-radius: 4px;
            text-align: right;
        }
        .param-row {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 6px;
        }
        .param-slider {
            width: 90px;
            min-width: 0;
            margin-right: 0;
            accent-color: #4caf50;
        }
    </style>
</head>
<body>
    <!-- Menu de hamb√∫rguer padr√£o pagina2 -->
    <div class="menu" style="position:fixed; top:8px; left:8px; z-index:1000;">
        <button id="menu-toggle-btn" style="background:none;border:none;cursor:pointer;padding:0;margin-right:8px;">
            <div style="display:flex; flex-direction:column;">
                <div class="menu-icon"></div>
                <div class="menu-icon"></div>
                <div class="menu-icon"></div>
            </div>
        </button>
        <div class="menu-content">
            <label style="margin-bottom:10px;">
                <input id="dark-mode-toggle" type="checkbox">
                <span id="dark-mode-icon">üåô</span>
            </label>
            <a href="/principal" class="menu-link" style="margin-top:16px;">P√°gina Inicial</a>
            <div style="margin-top:10px; margin-bottom:2px; font-weight:bold; color:#1976d2;">Controle</div>
            <a href="/alocacao" class="menu-link">Aloca√ß√£o de Polos</a>
            <a href="/raizes" class="menu-link">Lugar das Ra√≠zes</a>
            <a href="/malhaaberta" class="menu-link">Malha Aberta</a>
            <a href="/simuladorcomp" class="menu-link">Simulador Completo</a>
            <button id="abrir-feedback" style="margin-top:10px;">Enviar Feedback</button>
        </div>
    </div>
    <div style="height:56px;"></div>

    <div class="container">
        <!-- Modal -->
        <div id="modalExplicacao" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal()">&times;</span>
                <div class="section-title">Polin√¥mio Caracter√≠stico</div>
                <p>
                    O polin√¥mio caracter√≠stico √© uma ferramenta essencial para analisar a estabilidade e o comportamento de sistemas lineares invariantes no tempo (LTI). 
                    Ele √© obtido a partir da equa√ß√£o diferencial do sistema e suas ra√≠zes indicam as frequ√™ncias naturais do sistema.
                </p>
                <p>
                    Por exemplo, para a equa√ß√£o diferencial \( y''(t) + 5y'(t) + 6y(t) = x(t) \), o polin√¥mio caracter√≠stico √© dado por:
                </p>
                <p class="latex">
                    \( P(s) = s^2 + 5s + 6 \)
                </p>
                <p>
                    As ra√≠zes deste polin√¥mio determinam a estabilidade do sistema:
                    <ul>
                        <li>Ra√≠zes com parte real negativa: Sistema est√°vel.</li>
                        <li>Ra√≠zes com parte real positiva: Sistema inst√°vel.</li>
                        <li>Ra√≠zes com parte real zero: Sistema na fronteira da estabilidade.</li>
                    </ul>
                </p>
            </div>
        </div>

        <!-- Layout principal -->
        <div class="main-container">
            <!-- Entrada de Par√¢metros -->
            <div class="side-col">
                <div class="section-title">
                    Par√¢metros do Polin√¥mio Caracter√≠stico
                    <span class="info-icon" onclick="openModal()">&#9432;</span>
                </div>
                <div class="param-list">
                    <label>Coeficientes do Polin√¥mio:</label>
                    <div id="polinomio-coef-list"></div>
                    <button class="add-btn" onclick="addCoef()">Adicionar Coeficiente</button>
                </div>
                <div>
                    <span class="latex" id="latex-polinomio"></span>
                </div>
                <div id="estabilidade-bibo" style="margin-top: 10px; font-weight: bold; color: #333;"></div>
            </div>

            <!-- Gr√°ficos -->
            <div class="main-col">
                <div class="section-title">Gr√°ficos</div>
                <div id="plot-container">
                    <div>
                        <div style="display: flex; align-items: center; margin-bottom: 4px;">
                            <button id="seta-resposta-sistema" class="seta-grafico-btn" style="background:none;border:none;font-size:1.3em;cursor:pointer;color:#2196f3;margin-right:6px;">&#x25BC;</button>
                            <h3 style="margin: 0;">Resposta do Sistema</h3>
                        </div>
                        <div id="plot-resposta-sistema" style="display: none;"></div>
                    </div>
                    <div>
                        <div style="display: flex; align-items: center; margin-bottom: 4px;">
                            <button id="seta-resposta-degrau" class="seta-grafico-btn" style="background:none;border:none;font-size:1.3em;cursor:pointer;color:#2196f3;margin-right:6px;">&#x25BC;</button>
                            <h3 style="margin: 0;">Resposta ao Degrau</h3>
                        </div>
                        <div id="plot-resposta-degrau" style="display: none;"></div>
                    </div>
                    <div>
                        <div style="display: flex; align-items: center; margin-bottom: 4px;">
                            <button id="seta-resposta-senoidal" class="seta-grafico-btn" style="background:none;border:none;font-size:1.3em;cursor:pointer;color:#2196f3;margin-right:6px;">&#x25BC;</button>
                            <h3 style="margin: 0;">Resposta Senoidal</h3>
                        </div>
                        <div id="plot-resposta-senoidal" style="display: none;"></div>
                    </div>
                    <div>
                        <div style="display: flex; align-items: center; margin-bottom: 4px;">
                            <button id="seta-bode" class="seta-grafico-btn" style="background:none;border:none;font-size:1.3em;cursor:pointer;color:#2196f3;margin-right:6px;">&#x25BC;</button>
                            <h3 style="margin: 0;">Resposta em frequ√™ncia</h3>
                        </div>
                        <div id="plot-bode" style="display: none;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Estado dos par√¢metros
        let coeficientes_polinomio = [1, 2]; // Exemplo inicial: s^2 + 5s + 6

        // Fun√ß√µes para abrir e fechar o modal
        function openModal() {
            document.getElementById('modalExplicacao').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('modalExplicacao').style.display = 'none';
        }

        // Fun√ß√£o debounce
        function debounce(func, wait) {
            let timeout;
            return function(...args) {
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(this, args), wait);
            };
        }

        // Vers√£o debounced do updateAll
        const updateAllDebounced = debounce(updateAll, 30);

        // Renderizar lista de coeficientes com slider
        function renderCoefList() {
            const container = document.getElementById('polinomio-coef-list');
            container.innerHTML = '';
            coeficientes_polinomio.forEach((val, idx) => {
                const row = document.createElement('div');
                row.className = 'param-row';
                row.innerHTML = `
                    <input type="range" class="param-slider" min="-10" max="10" step="0.01" value="${val}" 
                        oninput="onCoefSliderChangeDebounced(${idx}, this.value)">
                    <input type="number" class="input-inline" value="${val}" step="0.01"
                        oninput="onCoefChangeDebounced(${idx}, this.value)">
                    <button class="remove-btn" onclick="removeCoef(${idx})">x</button>
                `;
                container.appendChild(row);
            });
        }

        // Fun√ß√µes debounced para os inputs
        function onCoefSliderChangeDebounced(idx, value) {
            coeficientes_polinomio[idx] = parseFloat(value);
            document.querySelectorAll('.input-inline')[idx].value = value;
            updateAllDebounced();
        }

        function onCoefChangeDebounced(idx, value) {
            coeficientes_polinomio[idx] = parseFloat(value);
            document.querySelectorAll('.param-slider')[idx].value = value;
            updateAllDebounced();
        }

        function calcularModuloCaracteristico(coeficientes) {
            const s = math.range(-10, 10, 0.1).toArray(); // Intervalo de s
            const modulo = s.map(val => {
                const valorPolinomio = coeficientes.reduce((acc, coef, idx) => acc + coef * Math.pow(val, coeficientes.length - idx - 1), 0);
                return Math.abs(valorPolinomio);
            });
            return { s, modulo };
        }

        function atualizarModuloCaracteristico() {
            try {
                const { s, modulo } = calcularModuloCaracteristico(coeficientes_polinomio);

                const data = [
                    {
                        x: s,
                        y: modulo,
                        type: 'scatter',
                        mode: 'lines',
                        name: 'M√≥dulo Caracter√≠stico'
                    }
                ];

                const layout = {
                    title: 'M√≥dulo Caracter√≠stico',
                    xaxis: { title: 's' },
                    yaxis: { title: '|P(s)|' }
                };

                Plotly.newPlot('plot-modulo-caracteristico', data, layout, { responsive: true });
            } catch (error) {
                console.error('Erro ao atualizar o gr√°fico de m√≥dulo caracter√≠stico:', error);
            }
        }

        function atualizarRespostaDegrau() {
            try {
                const t = math.range(0, 10, 0.1).toArray(); // Intervalo de tempo
                const resposta = t.map(val => {
                    return coeficientes_polinomio.reduce((acc, coef, idx) => acc + coef * Math.exp(-idx * val), 0);
                });

                const data = [
                    {
                        x: t,
                        y: resposta,
                        type: 'scatter',
                        mode: 'lines',
                        name: 'Resposta ao Degrau'
                    }
                ];

                const layout = {
                    title: 'Resposta ao Degrau',
                    xaxis: { title: 'Tempo (t)' },
                    yaxis: { title: 'Amplitude' }
                };

                Plotly.newPlot('plot-resposta-degrau', data, layout, { responsive: true });
            } catch (error) {
                console.error('Erro ao atualizar o gr√°fico de resposta ao degrau:', error);
            }
        }

        function calcularBode(coeficientes) {
            const omega = math.range(0.1, 100, 0.1).toArray(); // Frequ√™ncias angulares
            const magnitude = [];
            const fase = [];

            omega.forEach(w => {
                const s = math.complex(0, w); // s = jw
                const valorPolinomio = coeficientes.reduce((acc, coef, idx) => {
                    return acc.add(math.multiply(coef, math.pow(s, coeficientes.length - idx - 1)));
                }, math.complex(0, 0));

                magnitude.push(20 * Math.log10(math.abs(valorPolinomio))); // Magnitude em dB
                fase.push(math.atan2(math.im(valorPolinomio), math.re(valorPolinomio)) * (180 / Math.PI)); // Fase em graus
            });

            return { omega, magnitude, fase };
        }

        function atualizarGraficoBode() {
            try {
                const { omega, magnitude, fase } = calcularBode(coeficientes_polinomio);

                const data = [
                    {
                        x: omega,
                        y: magnitude,
                        type: 'scatter',
                        mode: 'lines',
                        name: 'Magnitude (dB)',
                        yaxis: 'y1'
                    },
                    {
                        x: omega,
                        y: fase,
                        type: 'scatter',
                        mode: 'lines',
                        name: 'Fase (graus)',
                        yaxis: 'y2'
                    }
                ];

                const layout = {
                    title: 'Gr√°fico de Bode',
                    xaxis: { title: 'Frequ√™ncia Angular (rad/s)', type: 'log' },
                    yaxis: { title: 'Magnitude (dB)', side: 'left' },
                    yaxis2: {
                        title: 'Fase (graus)',
                        overlaying: 'y',
                        side: 'right'
                    }
                };

                Plotly.newPlot('plot-bode', data, layout, { responsive: true });
            } catch (error) {
                console.error('Erro ao atualizar o gr√°fico de Bode:', error);
            }
        }

        function verificarEstabilidadeBIBO(coeficientes) {
            try {
                const grau = coeficientes.length - 1;

                let raizes = [];
                if (grau === 2) {
                    // F√≥rmula de Bhaskara para polin√¥mios de grau 2
                    const [a, b, c] = coeficientes;
                    const delta = b * b - 4 * a * c;

                    if (delta >= 0) {
                        raizes.push((-b + Math.sqrt(delta)) / (2 * a));
                        raizes.push((-b - Math.sqrt(delta)) / (2 * a));
                    } else {
                        raizes.push({ re: -b / (2 * a), im: Math.sqrt(-delta) / (2 * a) });
                        raizes.push({ re: -b / (2 * a), im: -Math.sqrt(-delta) / (2 * a) });
                    }
                } else if (grau === 1) {
                    // Polin√¥mio de grau 1: ax + b = 0
                    const [a, b] = coeficientes;
                    raizes.push(-b / a);
                } else {
                    console.error('Somente polin√¥mios de grau 1 e 2 s√£o suportados nesta implementa√ß√£o.');
                    return 'Erro: Apenas polin√¥mios de grau 1 e 2 s√£o suportados.';
                }

                let temParteRealPositiva = false;
                let temParteRealZero = false;

                raizes.forEach(raiz => {
                    const parteReal = typeof raiz === 'object' ? raiz.re : raiz;
                    if (parteReal > 0) temParteRealPositiva = true;
                    if (parteReal === 0) temParteRealZero = true;
                });

                if (temParteRealPositiva) {
                    return 'O sistema √© inst√°vel.';
                } else if (temParteRealZero) {
                    return 'O sistema √© marginalmente est√°vel.';
                } else {
                    return 'O sistema √© est√°vel.';
                }
            } catch (error) {
                console.error('Erro ao verificar estabilidade:', error);
                return 'Erro ao calcular estabilidade.';
            }
        }

        function togglePlotVisibility(buttonId, plotId) {
            const button = document.getElementById(buttonId);
            const plot = document.getElementById(plotId);
            if (plot.style.display === 'none' || plot.style.display === '') {
                plot.style.display = 'block';
                button.innerHTML = '&#x25B2;'; // Seta para cima
            } else {
                plot.style.display = 'none';
                button.innerHTML = '&#x25BC;'; // Seta para baixo
            }
            updateAll(); // Atualiza os gr√°ficos ao clicar
        }

        function updateAll() {
            try {
                renderizarFT(coeficientes_polinomio);
                const mensagemEstabilidade = verificarEstabilidadeBIBO(coeficientes_polinomio);
                document.getElementById('estabilidade-bibo').innerText = mensagemEstabilidade;

                atualizarRespostaSistema();
                atualizarRespostaDegrau();
                atualizarRespostaSenoidal();
                atualizarGraficoBode();
                atualizarModuloCaracteristico();

                if (window.MathJax) MathJax.typesetPromise();
            } catch (error) {
                console.error('Erro ao atualizar:', error);
            }
        }

        // Alternar visibilidade dos gr√°ficos
        function togglePlotVisibility(buttonId, plotId) {
            const button = document.getElementById(buttonId);
            const plot = document.getElementById(plotId);
            if (plot.style.display === 'none' || plot.style.display === '') {
                plot.style.display = 'block';
                button.innerHTML = '&#x25B2;'; // Seta para cima
            } else {
                plot.style.display = 'none';
                button.innerHTML = '&#x25BC;'; // Seta para baixo
            }
        }

        function atualizarRespostaSistema() {
            try {
                const { s, modulo } = calcularModuloCaracteristico(coeficientes_polinomio);

                const data = [
                    {
                        x: s,
                        y: modulo,
                        type: 'scatter',
                        mode: 'lines',
                        name: 'Resposta do Sistema'
                    }
                ];

                const layout = {
                    title: 'Resposta do Sistema',
                    xaxis: { title: 's' },
                    yaxis: { title: '|P(s)|' }
                };

                Plotly.newPlot('plot-resposta-sistema', data, layout, { responsive: true });
            } catch (error) {
                console.error('Erro ao atualizar o gr√°fico de resposta do sistema:', error);
            }
        }

        function atualizarRespostaSenoidal() {
            try {
                const A = 1; // Amplitude da entrada senoidal
                const omega = 2 * Math.PI; // Frequ√™ncia angular (1 Hz)
                const t = math.range(0, 10, 0.1).toArray(); // Intervalo de tempo

                // Calcula H(jw) usando os coeficientes atuais
                const jw = math.complex(0, omega);
                let P_jw = coeficientes_polinomio.reduce((acc, coef, idx) => {
                    return math.add(acc, math.multiply(coef, math.pow(jw, coeficientes_polinomio.length - idx - 1)));
                }, math.complex(0, 0));
                let H_jw = math.divide(1, P_jw);

                const mag = math.abs(H_jw);
                const fase = math.arg(H_jw); // Em radianos

                // Resposta senoidal em regime permanente
                const resposta = t.map(val => {
                    return mag * A * Math.sin(omega * val + fase);
                });

                const data = [
                    {
                        x: t,
                        y: resposta,
                        type: 'scatter',
                        mode: 'lines',
                        name: 'Resposta Senoidal'
                    }
                ];

                const layout = {
                    title: 'Resposta Senoidal',
                    xaxis: { title: 'Tempo (t)' },
                    yaxis: { title: 'Amplitude' }
                };

                Plotly.newPlot('plot-resposta-senoidal', data, layout, { responsive: true });
            } catch (error) {
                console.error('Erro ao atualizar o gr√°fico de resposta senoidal:', error);
            }
        }

        function renderizarFT(coeficientes) {
    const polinomioLatex = coeficientes
        .map((coef, idx) => {
            const expoente = coeficientes.length - idx - 1;
            return coef !== 0 ? `${coef}s^{${expoente}}` : '';
        })
        .filter(term => term !== '')
        .join(' + ');

    // Atualiza o LaTeX no elemento HTML
    document.getElementById('latex-polinomio').innerHTML = `\\( P(s) = ${polinomioLatex} \\)`;

    // Reprocessa o MathJax para renderizar o LaTeX
    if (window.MathJax) {
        MathJax.typesetPromise();
    }
}

        // Adiciona um novo coeficiente ao polin√¥mio
        function addCoef() {
            coeficientes_polinomio.push(1); // Valor padr√£o 1
            renderCoefList();
            updateAll();
        }

        // Remove o coeficiente de √≠ndice idx
        function removeCoef(idx) {
            if (coeficientes_polinomio.length > 1) {
                coeficientes_polinomio.splice(idx, 1);
                renderCoefList();
                updateAll();
            }
        }

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function () {
            renderCoefList();
            updateAll();

            document.getElementById('seta-resposta-sistema').onclick = () => togglePlotVisibility('seta-resposta-sistema', 'plot-resposta-sistema');
            document.getElementById('seta-resposta-degrau').onclick = () => togglePlotVisibility('seta-resposta-degrau', 'plot-resposta-degrau');
            document.getElementById('seta-resposta-senoidal').onclick = () => togglePlotVisibility('seta-resposta-senoidal', 'plot-resposta-senoidal');
            document.getElementById('seta-bode').onclick = () => togglePlotVisibility('seta-bode', 'plot-bode');
        });

        // Menu hamburguer interativo igual pagina2
        document.addEventListener('DOMContentLoaded', function() {
            // Menu hamburguer interativo com delay de 0.3s para fechar
            const menu = document.querySelector('.menu');
            const menuContent = document.querySelector('.menu-content');
            const menuBtn = document.getElementById('menu-toggle-btn');
            let closeMenuTimeout = null;

            menu.classList.remove('open');
            menuContent.style.display = 'none';

            function openMenu() {
                if (closeMenuTimeout) {
                    clearTimeout(closeMenuTimeout);
                    closeMenuTimeout = null;
                }
                menu.classList.add('open');
                menuContent.style.display = 'block';
            }
            function closeMenu() {
                menu.classList.remove('open');
                menuContent.style.display = 'none';
            }

            menuBtn.addEventListener('mouseenter', openMenu);
            menu.addEventListener('mouseenter', openMenu);

            menu.addEventListener('mouseleave', function() {
                closeMenuTimeout = setTimeout(closeMenu, 300);
            });

            menuBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                if (menu.classList.contains('open')) {
                    closeMenu();
                } else {
                    openMenu();
                }
            });

            document.addEventListener('click', function(e) {
                if (!menu.contains(e.target)) {
                    closeMenu();
                }
            });

            // Dark mode toggle simplificado
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            const darkModeIcon = document.getElementById('dark-mode-icon');
            function setDarkMode(enabled) {
                document.body.classList.toggle('dark-mode', enabled);
                darkModeIcon.textContent = enabled ? 'üåû' : 'üåô';
                localStorage.setItem('dark-mode', enabled);
            }
            // Inicializa estado do dark mode
            const darkModeEnabled = localStorage.getItem('dark-mode') === 'true';
            darkModeToggle.checked = darkModeEnabled;
            setDarkMode(darkModeEnabled);

            darkModeToggle.addEventListener('change', function(event) {
                setDarkMode(event.target.checked);
            });
        });
    </script>
</body>
</html>